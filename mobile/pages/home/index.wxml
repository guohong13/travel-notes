<!-- 导航栏 -->
<nav nav-type="search" class="sticky-nav" />
<!-- 内容区域 -->
<view class="home-container">
  <view class="home-content">
    <!-- 增加一个空的占位元素，用于保持布局 -->
    <view class="sticky-placeholder"></view>
    <t-tabs value="{{activeTab}}" bind:change="onHomeTabChange">
      <t-tab-panel label="发现" value="recommend">
        <view class="card-scroll">
          <t-pull-down-refresh value="{{enable}}" bind:refresh="onRefresh" loadingTexts="{{['下拉刷新', '松手刷新', '正在刷新', '刷新完成']}}">
            <view class="home-card-list">
              <card wx:for="{{cardInfo}}" wx:key="index" desc="{{item.desc}}" url="{{item.coverImage}}" avatar="{{item.avatar}}" nickname="{{item.nickname}}" likeCount="{{item.likeCount}}" noteId="{{item.id}}" bind:tap="onTapCard" data-item="{{item}}" />
            </view>
            <!-- 加载更多状态 -->
            <view class="load-more" wx:if="{{cardInfo.length > 0}}">
              <view wx:if="{{loadingMore}}" class="loading-text">
                <t-loading size="20rpx" text="加载中..." />
              </view>
              <view class="no-more-text" wx:elif="{{!hasMore}}">
                没有更多内容了
              </view>
            </view>
          </t-pull-down-refresh>
        </view>
      </t-tab-panel>
      <t-tab-panel label="关注" value="follow">
        <view class="card-scroll">
          <t-pull-down-refresh value="{{enable}}" bind:refresh="onRefresh" loadingTexts="{{['下拉刷新', '松手刷新', '正在刷新', '刷新完成']}}">
            <view class="home-card-list">
              <card wx:for="{{likeList}}" wx:key="index" desc="{{item.desc}}" url="{{item.coverImage}}" avatar="{{item.avatar}}" nickname="{{item.nickname}}" likeCount="{{item.likeCount}}" noteId="{{item.id}}" bind:tap="onTapCard" data-item="{{item}}" />
            </view>
            <!-- 关注列表加载状态 -->
            <view class="load-more" wx:if="{{likeList.length > 0}}">
              <view class="no-more-text" wx:if="{{!followingHasMore}}">
                没有更多关注内容了
              </view>
            </view>
            <!-- 空状态提示 -->
            <view class="empty-state" wx:if="{{likeList.length === 0 && !followingHasMore}}">
              <text>还没有关注任何用户，去发现更多精彩内容吧！</text>
            </view>
          </t-pull-down-refresh>
        </view>
      </t-tab-panel>
    </t-tabs>
  </view>
</view>